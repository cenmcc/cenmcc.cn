# 第二章 数据通信基础

### 数据通信

- 数据通信的**基本概念**：

  - 消息：人类能够感知的描述，如声音、文字、图像、气味等。

  - 信息：信息中所包含的有意义的内容，消息是信息的载体。

  - 数据：对客观事物的性质状态及相互关系等进行记载的物理符号及其组合。数字、文字、图像或抽象的符号等。

  - 信号：传递信息的载体称为信号，一般表现为电磁或光的形式，并通过电平、电流和频率的变化表示信息。

  - 通信系统模型：[信源] => [发送设备] => [信道(传输过程中产生噪声源)] => [接收设备] => [信宿] 

  - 信宿：信号的终点，并将信号转换为人们所能识别的消息。若为数据通信模型，则信源和信宿则是二进制设备。如计算机， 智能终端。

  - 模拟通信与数字通信

    1. 二者区别：信道中传输的是模拟信号还是数字信号。

    2. 模拟信号与数字信号的转化：

       模拟信号 => 采样、量化、编码 => 数字信号

       数字信号 => 解码、平滑 => 模拟信号

    3. 数据通信系统与数字通信系统的区别

       - 数字通信系统指信道中传递的信号是离散的数字信号。
       - 数据通信系统指信源和信宿端处理的是二进制数据，信道中传递的既可以是模拟信号，也可以是数字信号。


  模拟信号可以通过**采样** 、量化和编码变成数字信号。

  数字通信系统中信道中传递的是**数字**信号。  



#### 数据传输方式

- ##### 单向通信，双向交替通信，双向同时通信

  1. 单向通信：又称单工通信，任何时间只能有一个方向的通信，如无线电广 播。

  2. 双向交替通信：又称半双工通信，通信的双方都可以发送信息，但不能同时发送或接收，如无线电对讲机系统。

  3. 双向同时通信：又称全双工通信，通信双方都可以同时发送和接收信息，如电话网、计算机网络。

- **并行通信，串行通信**：计算机中处理数据时，是以字节（Byte）为单位的，一个字节由8个二进制位（bit）组成。

  1. 并行通信：为一个字节的每一个bit位设置一个传输通道，所有bit位同时进行传输。
  2. 串行通信：信息传输通过一条通道，数据中的每个字节中的每一个bit依次在这条信道上传输，节省线路设备，速度慢，适用于长距离的数据传输。（RS-232和USB接口属于串行通信。）

- **异步通信，同步通信**：同步技术就是通信系统中实现收发两端动作统一，保持收发步调一致的过程。两种方式：**异步式同步**和**同步式同步**，区别在于收发两端的时钟是独立的还是同步的。

  1. 异步数据传输：以**字符**为单位发送，一次传输一个字符，每个字符5-8bit表示，每个字符前有一个起始位，后面有1个或2 个停止位。无字符发送时一直发送停止位。（特点：**无需收发两端传输时钟信号**，传输简单，效率低，速度慢。）
  2. 同步数据传输：以**数据块**为单位进行发送，每个数据块包含多个字符，每个字符5-8bit。每个数据块前面加上起始标志，后面加上结束标志。传输效率高，开销小，但**需要双方建立同步时钟**，实现复杂， 适合高速传输。

- **基带传输、频带传输**

  1. 基带传输：计算机作为信源发出的原始数据信号称为基本频带信号，用固定的高低电平表示二进制1或0，简称基带信号。

     直接在信道中传输基带信号，称为基带传输，（以太网、令牌环网）

  2. 频带传输：有些信道不具有低通性，具有带通性，不适合直接传输基带信号，需要利用基带信号去调制与信道匹配的载波信号。在信道中传送经过调制的载波信号实现将基带信号所携带的信息传送出去的方式称为频带传输。

​	**电话线不适合传输基带信号，计算机利用电话线上网时，得调制成相应的频带信号传输。**

调制方法：
- 模拟信号传输的基础是载波，载波具有三大要素：幅度、频率、和相位。
- 数字调制的三种基本形式：调幅（AM）、调频（FM）、调相（PM）



【选择题】进行模拟传输时，将数字信号转换成模拟信号的过程称为**调制**。（模拟信号变换为数字信号成为**解调**）

【解析】将数字信号转换成模拟信号称为调制，将模拟信号转换成数字信号的过程称为解调。一般计算机利用电话线上网时， 需要同时收发（调制和解调），所以这个设备就是调制解调器 ( MODEM ) 





#### 第三节 数据通信系统性能

（1）衡量数据通信系统有效性的指标：带宽、码元速率、信息速率和频带利用率。衡量可靠性指标主要有：信噪比（越大越好）、误码率（越低越好）。

（2）模拟通信系统有效性的指标：带宽（信道带宽和信号传输带宽衡量可靠性：信噪比，接收端输出有用信号功察与噪声功率的比值。信噪比越高，可靠性越高。

（3）数字通信系统的有效性：传输速率和频带利用率其中传输速率：码元速率，信息速率。



##### 数据通信系统的性能指标

（1）码元速率R(B)，波特率(Band)

​	数字系统中，用时间间隔相同的符号表示一个离散值，这时间间隔内的信号称为码元，时间间隔称为码元长度。

​	波特率表示的是：每秒传送的码元数目。

​	R(B) = 1 / T（T：码元长度，单位秒）

（2.1）信息速率，比特率

​	每秒传送的二进制比特数，单位为比特/秒，bit/s，bps。

（2.2）码元与比特的关系

​	一个二进制码元含有1bit信息量；一个四进制码元（四种形式的码元），携带2bit的信息量（00， 01，10，11）。

​	一个M进制码元携带log(2)M比特的信息量

​	R(b) = R(B) log(2) M（R(b)：信息速率 、R(B)：码元速率）

（3）频带利用率（衡量数字通信系统的通信有效性，定义为每赫兹所实现的传输速率。）

​	n = R(b) / B 或者 n = R(B) / B（B：数字通信系统的信号带宽）

（4）误码率与误比特率（衡量数字通信系统的可靠性，一般小于10(-9)）

（5）信道极限信息传输速率，香农公式：C = W log(2) (1+ S /N) (bps)

​	C：极限信息传输速率、 W：信道带宽Hz、 S：信号平均功率、 N：高斯噪声功率



【选择题】在码元速率为1200波特的调制解调器中，采用8PSK 相位技术，可获得的信息速率为3600bps。

【解析】根据信息传输速率公式R(b)=R(b)log(2)N 故得解R(b)=1200 * log(2) 8 = 3600bps



#### 第四节 传输信道

##### 一、有线信道

有线信道包括：架空明线，双绞线，同轴电缆，光纤

1. 架空明线（平行且相互分离或绝缘的架空裸线线路。长距离传输最高频率为150kHz，短距离传输，最高频率可达300kHz。）

   - 优点：传输损耗低

   - 缺点：易受天气和外界干扰，带宽有限

2. 双绞线
   - 两根绝缘的铜导线按一定密度互相绞合在一起。
   - 分为非屏蔽双绞线（UTP）和屏蔽双绞线（STP）。
   - 计算机网络中最常用的是三类（10BASE-T）和五类 （100BASE-T）非屏蔽双绞线。
   - 双绞线主要用于基带传输。

3. 同轴电缆

- 两个同心导体，而导体和屏蔽层又共用同一轴心的电缆
- 同轴电缆从用途上分可分为**基带同轴电缆**(传统以太网)和**宽带同轴电缆**(有线电视) 
- 早期的共享式局域网基本采用同轴电缆作为传输介质，现在已被双绞线所代替。
-  同轴电缆的带宽可以高达1GHz。主要用做频带传输。

（4）光纤

光纤具有损耗低，频带宽，抗腐蚀，抗干扰等优点。由于纤芯的折射率大于包层的折射率，所以进入纤芯的光会在两层的边界产生全反射。

- 阶跃型光纤，光波只在边界发生折射。

- 梯度型光纤，折射率沿着半径增大的方向逐渐减少。

光纤可分为**多模光纤**和**单模光纤**。

- 多模光纤：采用发光二极管作为光源，传输带宽窄。
- 单模光纤：采用激光器作为光源。

##### 二、无线信道

1. 无线信道，利用电磁波在空间的传播来传输信号。
2. 为了避免不同通信系统之间的相互干扰，国际电信联盟 ITU，负责制定有关无线电频率使用的国际协议。





【填空题】常用的三种有线传输媒体为双绞线、同轴电缆和光纤





#### 第五节 数据通信中编码

二进制数据要转变成合适的电磁波信号才能在信道中传输，这种转变过程称为数据编码。

​	数据编码的方法：模拟数据编码和数字数据编码 

1. ##### 模拟数据编码

​	为了利用电话网，可以将计算机的二进制数字信号转换适合电话网信道中传输的模拟信号。在发送端将数字信号变换成模拟信号的过程称为调制。在接收端将模拟信号变换成数字信号的过程称为解调。

​	能在模拟信道中传播的模拟信号称为载波 y(t) = A sin(wt = q) （A: 振幅、w：频率、q：相位）

1. 振幅键控（ASK）：通过改变载波信号的振幅来表示数字信号1和0。抗干扰能力差例如，用振幅为A表示数字1，用振幅为0表示数字0

2. 频移键控（FSK）：通过改变载波信号的频率来表示数字信号1和0。抗干扰能力强例如，用频率w1表示数字1，用频率W2示数字0。

3. 相移键控（PSK）：通过改变载波信号的初始相位来表示数字信号1和0。例如用初始相位4=0表示数字1，用初始相位4P= 表示数字0



2. ##### 数字数据编码

数字数据编码是将原始二进制数据变换成数字脉冲序列实现基带传输的方法。

1. 单极性不归零码（NRZ）0：零电平；1：正电平（或负电平）

- 单极性：脉冲幅值是正电平或零电平，只有一个极性。

- 不归零：脉冲持续期间，电平保持不变，结束时也不必回归

2. 双极性不归零码  0：负电平；1：正电平  ITU-T的v.24接口和EIA的RS-232C接口标准采用双极码。

3. 单极性归零码RZ0：零电平；1：正电平，且在中间时刻由正电平回到零点平
4. 双极性归零码 0：负电平，且在中间时刻电平由负电平回到零电平。 1：正电平，且在中间时刻电平由正电平回到零电平。
5. 5.差分码  0：相邻电平无跳变。 1：相邻电平有跳变。
6. 双相码，曼彻斯特码  0：中间时刻，由负电平跳到正电平。 1：中间时刻，由正电平跳到负电平。
7. 差分双相码，差分曼彻斯特码每个比特中间都有跳变，用于同步。 0：开始处无跳变。1：开始处有跳变。
8. 多元码将二进制数据映射为多进制信号。一般的，将k个二进制数据映射为M=2k个离散的脉冲幅值之一。



模拟信号的数字编码

（1）将模拟信号转换为数字信号，便于在数字通信系统中传传输。A/D转换：抽样，量化和编码。

- 抽样：以一定的时间间隔采集模拟信号的瞬间值。

- 量化：根据某种规则将采样得到的瞬间值用数值表示出来。

- 编码：将量化得到的数值变换成一组二进制码。

例如：对于模拟信号f(t)，在t=T,2T,3T...时刻采样，得到瞬间值f(t)=5.2，将其量化为5，对5进行3位二进制编码得到101

（2）抽样定理--低通抽样定理和带通抽样定理

区别：假设模拟信号的频率范围为f1~fh，则信号带宽B=f一f，若 B>f，则为低通信号，若B<=f，则为带通信号。

**低通信号抽样定理**：对于一个频带有限模拟信号f(t)，假设频带为 （0，fh），若以抽样频率**fs>=2fh**，则信号f（t）将被抽样值完全确定，即抽样后的离散信号包含了原模拟信号的全部信息，接收端能够从中恢复f（t）。

带通信号抽样定理：fs=2B（1+k/n）

n为fh/B整数部分，k为fh/B小数部分



（2）脉冲编码调制PCM

PCM抽样：按照抽样定理把时间上连续的模拟信号转换为时间上离散的抽样信号。即指定有限个量化电平，把抽样值用最接近的电平表示。

- f（kT）为第k个抽样值

- fq（t）表示量化信号

- q1~qm是M个量化电平
- m(i)，表示分层电平

​	两个相邻的分层电平之差为量化间隔

量化误差：量化信号与原信号之差的绝对值。

根据量化间隔是否相等，分为均匀量化和非均匀量化 

（1）均匀量化：把模拟信号的取值域等间隔分割的量化称为均匀量化

（2）非均匀量化：指量化间隔随信号抽样值的不同而不同。



（3） 编码





### 第六节 复用技术

数据通信系统中的多路复用技术：时分复用、频分复用、波分复用、码分复用。

1. 频分多路复用FDM

​	在频域内将信道带宽划分为多个子信道，利用载波调制技术， 将原始信号调制到对应的子信道的载波信号上，整个物理信道内的频谱不重叠，从而公用一个信道。

2. 时分多路复用TDM

​	将通信信道的传输信号在时域内划分为多个等长的时隙，每路信号占用不同的时隙，在时域上互不重叠，共用一个信道。

- 同步时分多路复用STDM：同步时分多路复用就是按照固定的顺序把时隙分配给各路信号。
- 异步时分多路复用：为了提高设备的利用效率，为有大量数据要发送的用户分配较多的时隙，为有少量数据要发送的用户分配相对较少的时隙，没有数据的用户就不再分配时隙，称为异步时分多路复用。



比较典型的TDM，是时分制多路电话通信系统，模拟话音信号进行数字化编码，然后将多个话路的PCM话音数据用TDM的方法组装成帧。每个时隙承载一路PCM信号。

ITU分别针对准同步数学体系PDH，分别制定了两个建议，分别是E体系和T体系。我国、欧洲等地及国际间的连接采用E体系北美、日本和其他少数国家采用T体系。

E1载波：2.048Mbps；T1载波：1.544Mbps

3. 波分多路复用WDM

   本质也是频分复用，因为光波频率很高，通常用光的波长讨论。波分多路复用是指在一根光纤中传输多种不同波长的光信号， 由于波长不同，所以不会相互干扰，最后再用波长解复用器将各路光载波分解出来。

4. 码分多路复用CDM

   - 在编码域上划分，利用更长的相互正交的码组分别编码各路原始信息的每个码元，使得编码后的信号在同一信道中传输， 接收端利用码组的正交特性分离各路信号，实现信道共享。
   - 在码分系统中，每个通信站点分配一个唯一的N为码组S(i)，称为码片序列。
   - 每个站点在发送数据时，利用自己的码片序列对原始码元序列进行编码，当发送+1时，就发送码片序列；当发送-1时，就发送码片序列的反码。

码分多路复用—接收处理

​	接收端需要接收站点i的数据时，先获取该站点的码片序列S，， 然后在一个码片周期内，提取站点i发送的1bit原始信息。

​	运算结果为1，表明站点i发送了一位1；

​	运算结果为-1，表明站点i发送了一位-1；

​	运算结果为0，表明没有发送数据；

【单选题】在模拟传输的宽带网络中，常用的信道复用技术是频分复用。

【解析】典型的通过电话线上网的宽带网络，语音信号和数据信号共享电话线这一传输信道，采用的就是频分复用技术。波分复用技术一般用在光纤传输中。

### 第七节 差错控制技术

典型的差错控制方式包括差错重发、前向纠错，反馈校验和检错丢弃4中基本方式。

1. 检错重发，也成为自动请水重传方式ARQ

   对于出错的数据，接收端自动请求发送端发送该数据，直到收到正确数据为止。

   典型的ARQ：停止-等待ARQ，回退N步（Go-Back-N），选择性重传ARQ。

   1. 停止-等待ARQ

      停止-等待ARQ的发送方每发送一包数据之后就必须停下来等待接收方的确认，仅当发送方收到接收方正确接收确认后，再继续发送下一包数据，如果收到否定确认，则重发刚刚发送的数据包。特点是简单、所需要的缓冲存储空间小，但信道效率低。

   2. 回退N步ARQ

      发送方可以连续发送多个数据包，每个数据包要确保有唯一的编号；接收方在接收到数据包后利用差错编码进行差错检测，对于无差错的数据包进行正确接收，丢弃检测出差错的数据包， 并进行差错反馈，发送NAKn，n为发生错误数据包的编号。当发送NAKn后，接收方暂停接收后续的数据包，直到收到重新发送并正确到达的NAKn为止，再继续接收数据包。发送方在收到NAKn时，要重新发送n号数据包及其后续的数据包

   3. 选择性重传ARQ

      在选择性重传ARQ中，发送方也可以连续发送多个数据包，每个数据包也要确保有唯一的编号；接收方对于按顺序正确到达（即无差错）的数据包进行正常接收，对于差错数据包进行丢弃并发送NAKn进行差错反馈，对于n号数据包之后正确到达的数据包进行缓存，直到收到重发的、正确的n号数据包，再依次顺序接收（或提交）。发送方在收到NAKn时，只需重新发送n号数据包， 即洗择性重传。

（2.1）差错编码

1. 按照差错编码的检错/纠错能力划分，可为**检错码**和**纠错码**
2. 按照数据信息与差错编码冗余信息之间的构成关系，可分为线性码和非线性码。
3. 按照差错编码冗余信息与数据信息分组映射关系划分，可分为分组码和卷积码。
4. 按照数据信息在编码后是否发生变化划分，可分为系统码和非系统码 
5. 按照差错编码检错/纠错类型的不同划分，可分为随机错误检测/纠正码和突发错误检测/纠正码

（2.2）奇偶校验码包括奇校验和偶校验。

1. 在奇校验编码过程中，1位冗余比特的取值为0或者1，使得编码后的码字中1的个数为奇数。
2. 在偶校验编码过程中，1位冗余比特的取值为0或者1，使得编码后的码字中1的个数为偶数。
3. 

【填空题】通过增加冗余位使得码字中“1”的个数恒为奇数或偶数的编码方法为**奇偶校验码**

### 第八节 交换技术

常见的交换方式：**电路交换**和**存储-转发**。

存储-转发分为：**报文交换**和**分组交换**

1. 电路交换：通过中间交换结点在两个通信设备之间建立一条专用的通信线路。包括**建立电路、传输数据和拆除电路**3个阶段。（典型的电路交换 打电话）

2. 报文交换：从源结点到目的结点采用“存储-转发”方式， 转送报文时一个时刻仅占用一段通道。一个报文在每个节点的延迟时间，等于接收报文所需的时间加上向下一个节点转发所需的排队延迟时间之和。（典型应用 电报）

3. 分组交换

   将报文分成若干个分组，每个分组独立的以“存储-转发”方式从源节点传送到目的的节点。适用于交互式通信，如终端与主机通信。

   ① 虚电路分组交换：先建一条逻辑通路，每个分组除了包含数据之外还包含一个虚电路标识符，不再需要路由选择判定。分组在每个节点上仍然需要缓冲，并在线路上进行排队等待输出。（数据按指定路径排队传输）

   ② 数据报分组交换：每个分组的传送被单独处理，每个数据报自身携带足够的地址信息，由不同传输路径通过通信子网，不能保证各个数据报按序到达。整个过程中，没有虚电路建立，但要为每个数据报做路由选择。（数据随机选择传输路径，送达顺序可能不固定，接收完成后重新组合成原始的报文）

【填空题】电路交换进行通信要经过**建立电路**、传输数据和拆除电路 3个阶段。

2.假设信息码为二进制符号序列10110110，请分别画出对应的单极非归零码、双板归零码、差分码、曼彻斯特缩码和差分曼彻斯特编码的信号波形。
