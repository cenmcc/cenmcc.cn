# 第六章 网络应用技术

### 网络应用

- 概念：**网络应用**是直接面向计算机网络的用户，遵循相应的网络应用协议，为用户提供某个特定的网络服务或实现特定的网络功能的一套完整的软件系统。
- 基本的工作模式是**客户机/服务器**模式
  1. 一般的客户机/服务器模式C/S模式（B/S模式）：客户端发出请求，服务器等待响应。
  2. P2P模式：通信双方皆可以请求服务，也可以提供服务。



#### Internet域名系统（DNS）

- 概念：数字形式的IP地址，不便于记忆，人们习惯用字符表示 Internet上的主机，如www.163.com，这样用户使用域名访问网络服务，而数据包在传输过程中采用IP地址进行路由和转发。在Internet中，提供将主机域名转换为IP地址服务的网络应用，称为域名系统**DNS**。当一个应用程序遇到某个域名时，可以通过DNS将该域名对应的IP地址找到，并在通信过程中使用 IP地址进行数据的传输。

- DNS核心内容主要包括以下三个方面：

  1. 层次域名空间（**...标号3(三级域名).标号2(二级域名).标号1(顶级域名)**）

     【举例】山东大学的域名为sdu.edu.cn，其中的cn标号是顶级域名，edu标号是二级域名，sdu标号是三级域名。

     标号使用英文字符、数字和“-” 组成，每一个标号不超过63字符，整个域名不超过255字符。

- 顶级域名的分类

  - 国家顶级域名nTLD，如：
    - .cn表示中国
    - .us表示美国
    - .uk表示英国
  - 通用顶级域名gTLD：
    - .com（公司和企业）
    - .net（网络服务机构）
    - .org（非赢利性组织）
    - .edu（美国专用的教育机构）
    - .gov（美国专用的政府部门） 
    - .mil（美国专用的军事部门）
    - .int（国际组织）
  - 基础结构域名arpa，用于反向域名解析，又称反向域名。

- 各个国家负责自己国家所在顶级域名下的二级域名的制定和分配。我国的域名为.cn，在.cn域名下，将二级域名划分为类别域名和行政区域名两大类，由CNNIC统一管理。

- 域名服务器

  - 一个服务器所负责管辖的（或有权限的）范围叫做**区**（zone）。

  - 各单位划分自己管辖范围的区。但在一个区中的所有节点必须是能够连通的。

  - 每一个区设置相应的**权限域名服务器**，用来保存该区中的所有主机的域名到IP地址的映射。

  - DNS 服务器的管辖范围不是以“域”为单位，而是以“区” 为单位。

  - DNS域名服务器包括：根域名服务器，顶级域名服务器，权限域名服务器，本地域名服务器。

    - 根域名服务器：根域名服务器是最重要的域名服务器。所有的根域名服务器都知道所有的顶级域名服务器的域名和IP地址。在因特网上共有13个不同 IP 地址的根域名服务器，它们的名字是用一个英文字母命名，从a到m（前13个字母）。

      这些根域名服务器相应的域名分别是

      a.rootservers.net

      b.rootservers.net

      ...

      m.rootservers.net

    - 顶级域名服务器：这些域名服务器负责管理在该顶级域名服务器注册的所有二级域名。

    - 权限域名服务器：负责一个区的域名服务器。当一个权限域名服务器还不能给出最后的查询回答时，就会告诉发出查询请求的 DNS 客户，下一步应当找哪一个权限域名服务器。

    - 本地域名服务器：当一个主机发出 DNS查询请求时，这个查询请求报文就发送给本地域名服务题。每一个因特网服务提供者ISP，或一个大学，甚至一个大学里的系，都可以拥有一个本地域名服务器， 这种域名服务器有时也称为**默认域名服务器**。

- 域名解析分为**递归解析**和**迭代解析**两种方式。

  - <u>主机向本地域名服务器的查询一般都是采用递归查询</u>。如果主机所询问的本地域名服务器不知道被查询域名的IP地址，那么本地域名服务器就以 DNS 客户的身份，向其他根域名服务器继续发出查询请求报文。
  - <u>本地域名服务器向根域名服务器的查询通常是采用迭代查询</u>。当根域名服务器收到本地域名服务器的迭代查询请求报文时， 要么给出所要查询的IP 地址，要么告诉本地域名服务器：“你下一步应当向哪一个域名服务器进行查询”。然后让本地域名服务器进行后续的查询。

#### 文件传输协议（FTP）

- 作用：文件传输协议FTP，用于用户在两台主机之间进行远距离的文件传输。FTP提供交互式的访问，允许客户指明文件的类型与格式，并允许文件具有存取权限。FIP屏蔽了各计算机系统的细节，因而适合于在异构网络中的任意计算机之间传送文件。

- FTP采用客户机/服务器模式，服务器和客户机之间通过下载和上传来实现文件的传输。

- FTP使用TCP提供的可靠的传输服务

- **FTP主进程的工作步骤如下**

  1. 打开熟知端口（<u>端口号为21</u>），使客户进程能够连接上。

  2. 等待客户进程发出连接请求。

  3. 启动从属进程来处理客户进程发来的请求。从属进程对客户进程的请求处理完毕后即终止，但从属进程在运行期间根据需要还可能创建其他一些子进程。

  4. 回到等待状态，继续接受其他客户进程发来的请求。主进程与从属进程的处理是并发进行的。

     <u>服务器传输数据时使用熟知端口号20与客户端进程所提供的端口号建立数据连接。</u>PS：21端口建立连接 20端口传递数据



#### 电子邮件（E-mail）

- **电子邮件E-mail**是Internet中使用最为广泛的一种应用服务， 除了文字信息外，电子邮件还可以以附件的形式传送文档、 图像、音频和视频文件。

- 电子邮件系统的主要构成部分：**用户代理、邮件服务器和邮件发送、读取协议**

  - **发送使用smtp协议**
  - **读取使用pop3协议**
  - 网页发送和读取使用的是HTTP

- 在TCP/IP体系下的电子邮件地址格式是：**邮箱名@邮箱所在服务器的域名。**其中符号“@”读作“at”，表示“在”的意思。

- 电子邮件内容由**首部和主体**两部分组成

  - **To：一个或多个收件人的电子邮件地址，以分号分割**
  - **Subject：邮件主题**
  - **Cc：给某人发送一个邮件副本**
  - From：发信人邮件地址
  - Date：发信日期
  - Reoly-To：对方回信所用的地址

- **SMTP、POP3和IMAP协议**

  - 电子邮件**从用户代理发送到邮件服务器**采用的是SMTP协议**（端口号 25）**，**邮件服务器接收邮件到用户代理**采用的协议是**POP3或IMAP。**

  - SMTP协议规定在两个相互通信的SMTP进程之间应如何交换信息。

  - 邮局协议POP是邮件读取协议，现在使用第三版本POP3。

  - 另外一种功能更丰富的邮件接收协议是网际报文存取协议（IMAP）。

    都使用**客户机/服务器**工作方式。

    **基于Web的电子邮件系统，发件人客户端与发送服务器之间，收件人客户端与接收邮件服务器之间采用http进行通信。**



#### 万维网

- **万维网WWW**由成干上万个万维网站点（简称网站）组成的一个联机信息存储系统，网站上以**网页（Page）**的形式存储着各种文档，其中包含了文字、图片、声音和视频等各种信息。各个网站以链接（link）的方式联系在一起，用户可以从一个网站转到另一个网站进行访问。

- 万维网的核心内容：**统一资源定位（URL）、超文本传输协议（HTTP）和超文本标记语言（HTML）**

  - 统一资源定位URL：为了给Internet上的每一个文档进行标识，万维网采用统一资源定位URL的方法。URL为Internet上的每一个万维网页分配一个唯一的标识符。

    URL的一般格式如下：**<协议>://<主机>:＜端口>/<路径>。**

  - 超文本传输协议（HTTP）:超文本传输协议HTTP负责用户访问万维网文档，万维网文档之间的链接，以及将万维网文档中的数据传送到用户计算机。**HTTP是一个应用层协议，使用TCP连接进行可靠的传送**，能够在万维网上进行文本、声音、图像和视频等各种信息的交换。HTTP也是工作在客户机/服务器模式下，分为HTTP客户端和 HTTP服务器两部分，双方每次进行交互，都是由客户端发出的请求和服务器端发出的响应构成。

    - 使用浏览器访问万维网的过程可以总结为以下几个步骤:

      1. 用户在浏览器中输入需要访问网页的URL或者单击某个网页中的链接。
      2. 浏览器根据URL中的域名，通过DNS解析出目标网页的IP地址。
      3. 浏览器与网页所在服务器建立TCP连接。
      4. 浏览器发送HTTP请求报文，获取目标网页的文件。
      5. 服务器发送HTTP响应报文，将目标网页文件发送给浏览器。
      6. 释放TCP连接。
      7. 浏览器将网页的内容（包括文本、图像和声音等）显示呈现在用户计算机屏幕。

    - HTTP报文格式

      - HTTP请求报文由**请求行、请求头部行、空行和请求数据**4 分构成；

      - HTTP响应也由4部分组成分别是**状态行、消息头部、空行、响应正文**；

    - Cookie机制

      - Cookie是由W3C组织首先提出的一种技术，已经成为万维网的标准，所有的主流浏览器都支持Cookie，服务器通过 Cookie可以识别、限制和跟踪用户。
      - Cookie的准确定义是：Cookie是万维网服务器在客户的一段文本，用于保存用户访问服务器的相关信息。Cookie中保存的信息在用户每次访问服务器的过程中被服务器进行检索，以此来对用户进行识别和跟踪。

    - Cookie最常见的用途有以下几个：

      1. 网站可以利用Cookie的ID来准确统计网站的实际访问人数、 新访问者和重复访问者的人数对比，以及访问者的访问频率等数据。
      2. 网站可以利用Cookie限制某些特定的用户的访问。
      3. 网站可以存储用户访问过程中的操作习惯和偏好。
      4. 记录用户登录网站使用的用户名、密码等信息。
      5. 电子商务网站利用Cookie可以实现“购物车”功能。

    - Session机制

      - 定义：Session是另外一种万维网服务器记录用户访问状态的机制

      - Session与Cookie的最根本不同是：
        - Cookie机制中的用户信息文件被保存在客户端
        - Session是在服务器端将用户信息进行保存的
      - 作用：用户使用浏览器访问网站时，服务器把用户的信息记录在服务器上，称为Session。当该用户再次访问时可以在Session中查找该用户的状态信息。

  - 超文本标记语言（HTML）：超文本标记语言HTML是一种描述和表示万维网网页的标准语言。



### 电子商务应用

- 分类：

  - 按交易对象：
    1. 企业与消费者之间的电子商务 B2C
    2. 企业与企业之间的电子商务 B2B
    3. 个人与个人之间的电子商务 C2C
    4. 从线上到线下的电子商务 O2O
  - 按商户活动内容分类：
    1. 间接电子商务
    2. 直接电子商务

- 电子商务过程的三个阶段

  - 交易前
  - 交易中
  - 交易后

- 电子商务的主要功能

  1. 企业业务组织

  2. 信息发布与广告宣传

  3. 咨询治谈

  4. 在线选购

  5. 网上支付

  6. 交易管理

  7. 数据统计与挖掘

- 电子商务系统的一般结构

  | 技术标准 | 应用层：各种电子商务应用系统 | 法律法规 |
  | -------- | ---------------------------- | -------- |
  |          | 服务层：电子商务平台         |          |
  |          | 传输层：信息传输平台         |          |
  |          | 网络层：网络平台             |          |

  